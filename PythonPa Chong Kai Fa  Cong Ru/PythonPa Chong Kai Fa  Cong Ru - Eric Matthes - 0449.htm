<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:10pt Segoe UI, sans-serif; }
 .font3 { font:10pt SimHei, sans-serif; }
 .font4 { font:8pt SimSun, serif; }
 .font5 { font:10pt SimSun, serif; }
 .font6 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font6">432</span></p>
<p><span class="font5">第</span><span class="font6">20</span><span class="font5">章 设置应用程序的样式并对其进行部署</span></p>
<p><span class="font5">这个简单的模板指定了通用的</span><span class="font6">404</span><span class="font5">错误页面包含的信息，并且该页面的外观与网站的其他部 分一致。</span></p>
<p><span class="font5">再创建一个名为</span><span class="font6">500 html</span><span class="font5">的文件，并在其中输入如下代码：</span></p>
<p><span class="font1">500.html</span></p>
<p><span class="font0">{% extends &quot;learning_logs/base.html&quot; %}</span></p>
<p><span class="font0">{% block header %}</span></p>
<p><span class="font0">&lt;h2&gt;There has been an internal error. (500)&lt;/h2&gt; {% endblock header %}</span></p>
<p><span class="font5">这些新文件要求对</span><span class="font6">settings.py</span><span class="font5">做细微的修改：</span></p>
<p><span class="font1">settings.py</span></p>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">-</span></p>
<p><span class="font0">TEMPLATES = [ {</span></p>
<p><span class="font0">'BACKEND': 'django.template.backends.django.DjangoTemplates',</span></p>
<p><span class="font0">'DIRS': [os.path.join(BASE_DIR, 'learning_log/templates')], 'APP_DIRS': True,</span></p>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">-},</span></p>
<p><span class="font0">]</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li></ul>
<p><span class="font5">这项修改让</span><span class="font6">Django</span><span class="font5">在根模板目录中查找错误页面模板。</span></p>
<ul style="list-style:none;"><li>
<p><span class="font1">2 . </span><span class="font3">在本地查看错误页面</span></p></li></ul>
<p><span class="font5">在将项目推送到</span><span class="font6">Heroku</span><span class="font5">之前，如果你要在本地查看错误页面是什么样的，首先需要在本地设 置中设置</span><span class="font2">Debug=False</span><span class="font5">，以禁止显示默认的</span><span class="font6">Django</span><span class="font5">调试页面。为此，可对</span><span class="font6">settings.py</span><span class="font5">做如下修改(请 确保你修改的是用于本地环境的</span><span class="font6">settings.py</span><span class="font5">部分，而不是用于</span><span class="font6">Heroku</span><span class="font5">的部分)：</span></p>
<p><span class="font1">settings.py</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">- -</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li>
<li>
<p><span class="font0">#</span><span class="font4"> 安全警告 不要在在线环境中启用调试！</span></p></li></ul>
<p><span class="font0">DEBUG = False</span></p>
<p><span class="font0">ALLOWED_HOSTS = ['localhost']</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">- -</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li></ul>
<p><span class="font2">DEBUG</span><span class="font5">被设置为</span><span class="font2">False</span><span class="font5">时，你必须在</span><span class="font2">ALLOWED_HOSTS</span><span class="font5">中指定一个主机。现在，请求一个不属于你 的主题或条目，以查看</span><span class="font6">404</span><span class="font5">错误页面；请求不存在的</span><span class="font6">URL </span><span class="font5">(如</span><span class="font6">localhost:8000/letmein/</span><span class="font5">)，以查看</span><span class="font6">500 </span><span class="font5">错误页面。</span></p>
<p><span class="font5">查看错误页面后，将</span><span class="font2">DEBUG</span><span class="font5">重新设置为</span><span class="font2">True</span><span class="font5">，以方便你进一步开发“学习笔记”。(在</span><span class="font6">settings.py </span><span class="font5">中用于</span><span class="font6">Heroku</span><span class="font5">部署的部分中，确保</span><span class="font2">DEBUG</span><span class="font5">依然被设置为</span><span class="font2">False</span><span class="font5">)。</span></p>
</body>
</html>