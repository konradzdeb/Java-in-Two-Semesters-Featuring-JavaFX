<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:9pt Arial, sans-serif; }
 .font2 { font:10pt Arial, sans-serif; }
 .font3 { font:12pt Arial, sans-serif; }
 .font4 { font:10pt Segoe UI, sans-serif; }
 .font5 { font:10pt SimHei, sans-serif; }
 .font6 { font:12pt SimHei, sans-serif; }
 .font7 { font:8pt SimSun, serif; }
 .font8 { font:9pt SimSun, serif; }
 .font9 { font:10pt SimSun, serif; }
 .font10 { font:10pt Times New Roman, serif; }
 .font11 { font:11pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font10">254</span></p>
<p><span class="font9">第</span><span class="font10">13</span><span class="font9">章 外星人</span></p>
<p><span class="font2">ship.py</span></p>
<p><span class="font0">def center_ship(self):</span></p>
<p><span class="font0">&quot;&quot;&quot;</span><span class="font7">让飞船在屏幕上居中</span><span class="font0">&quot;&quot;&quot;</span></p>
<p><span class="font0">self.center = self.screen_rect.centerx</span></p>
<p><span class="font9">为让飞船居中，我们将飞船的属性</span><span class="font4">center</span><span class="font9">设置为屏幕中心的</span><span class="font10" style="font-style:italic;">x</span><span class="font9">坐标，而该坐标是通过属性 </span><span class="font4">screen_rect </span><span class="font9">获得的。</span></p>
<p><span class="font5">注意 </span><span class="font8">我们根本没有创建多艘飞船，在整个游戏运行期间，我们都只创建了一个飞船实例，并 在该飞船被撞到时将其居中。统计信息</span><span class="font4">ships_left</span><span class="font8">让我们知道飞船是否用完。</span></p>
<p><span class="font9">请运行这个游戏，射杀几个外星人，并让一个外星人撞到飞船。游戏暂停后，将出现一群新 的外星人，而飞船将在屏幕底端居中。</span></p>
<ul style="list-style:none;"><li>
<p><span class="font3">13.6.3 </span><span class="font6">有外星人到达屏幕底端</span></p></li></ul>
<p><span class="font9">如果有外星人到达屏幕底端，我们将像有外星人撞到飞船那样作出响应。请添加一个执行这 项任务的新函数，并将其命名为</span><span class="font4">update_aliens()</span><span class="font9">:</span></p>
<p><span class="font2">game_functions.py</span></p>
<p><span class="font0">def check_aliens_bottom(ai_settings, stats, screen, ship, aliens, bullets): &quot;&quot;&quot;</span><span class="font7">检查是否有外星人到达了屏幕底端</span><span class="font0">&quot;&quot;&quot; screen_rect = screen.get_rect() for alien in aliens.sprites():</span></p>
<p><span class="font1">❶ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">if alien.rect.bottom &gt;= screen_rect.bottom:</span></p>
<p><span class="font0"># </span><span class="font7">像飞船被撞到一样进行处理</span></p>
<p><span class="font0">ship_hit(ai_settings, stats, screen, ship, aliens, bullets) break</span></p>
<p><span class="font0">def update_aliens(ai_settings, stats, screen, ship, aliens, bullets):</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li>
<li>
<p><span class="font0"># </span><span class="font7">检查是否有外星人到达屏幕底端</span></p></li></ul>
<p><span class="font1">❷ </span><span class="font0">check_aliens_bottom(ai_settings, stats, screen, ship, aliens, bullets)</span></p>
<p><span class="font9">函数</span><span class="font4">check_aliens_bottom()</span><span class="font9">检查是否有外星人到达了屏幕底端。到达屏幕底端后，外星人的 属性</span><span class="font4">rect.bottom</span><span class="font9">的值大于或等于屏幕的属性</span><span class="font4">rect.bottom</span><span class="font9">的值(见</span><span class="font11" style="font-weight:bold;">O</span><span class="font9">)。如果有外星人到达屏幕底 端，我们就调用</span><span class="font4">ship_hit()</span><span class="font9">；只要检测到一个外星人到达屏幕底端，就无需检查其他外星人，因 此我们在调用</span><span class="font4">ship_hit()</span><span class="font9">后退出循环。</span></p>
<p><span class="font9">我们在更新所有外星人的位置并检测是否有外星人和飞船发生碰撞后调用</span><span class="font4">check_aliens_ bottom</span><span class="font9">。(见</span><span class="font5">❷</span><span class="font9">)。现在，每当有外星人撞到飞船或抵达屏幕底端时，都将出现一群新的外星人。</span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>