<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:10pt Segoe UI, sans-serif; }
 .font3 { font:7pt SimHei, sans-serif; }
 .font4 { font:10pt SimHei, sans-serif; }
 .font5 { font:8pt SimSun, serif; }
 .font6 { font:10pt SimSun, serif; }
 .font7 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font7">278</span></p>
<p><span class="font6">第</span><span class="font7">14</span><span class="font6">章 记分</span></p>
<p><span class="font0">aliens, bullets, mouse_x, mouse_y):</span></p>
<p><span class="font0">&quot;&quot;&quot;</span><span class="font5">在玩家单击</span><span class="font0">Play</span><span class="font5">按钮时开始新游戏</span><span class="font0">&quot;&quot;&quot;</span></p>
<p><span class="font0">button_clicked = play_button.rect.collidepoint(mouse_x, mouse_y)</span></p>
<p><span class="font0">if button_clicked and not stats.game_active:</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">- -</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li>
<li>
<p><span class="font0">#</span><span class="font5"> 重置游戏统计信息</span></p></li></ul>
<p><span class="font0">stats.reset_stats()</span></p>
<p><span class="font0">stats.game_active = True</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">#</span><span class="font5"> 重置记分牌图像</span></p></li></ul>
<p><span class="font3">❶ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">sb.prep_score()</span></p>
<p><span class="font0">sb.prep_high_score()</span></p>
<p><span class="font0">sb.prep_level()</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">#</span><span class="font5"> 清空外星人列表和子弹列表</span></p></li></ul>
<p><span class="font0">aliens.empty() bullets.empty()</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">- -</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li></ul>
<p><span class="font2">check_play_button()</span><span class="font6">的定义需要包含对象</span><span class="font2">sb</span><span class="font6">。为重置记分牌图像，我们在重置相关游戏设置 后调用</span><span class="font2">prep_score()</span><span class="font6">、</span><span class="font2">prep_high_score()</span><span class="font6">和</span><span class="font2">prep_level()</span><span class="font6">(见</span><span class="font4">❶</span><span class="font6">)。</span></p>
<p><span class="font6">在</span><span class="font2">check_events()</span><span class="font6">中，现在需要向</span><span class="font2">check_play_button()</span><span class="font6">传递</span><span class="font2">sb</span><span class="font6">，让它能够访问记分牌对象：</span></p><a name="caption1"></a>
<h6><a name="bookmark0"></a><span class="font1"><a name="bookmark1"></a>game_functions.py</span></h6>
<p><span class="font0">def check_events(ai_settings, screen, stats, sb, play_button, ship, aliens, bullets):</span></p>
<p><span class="font0">&quot;&quot;&quot;</span><span class="font5">响应按键和鼠标事件</span><span class="font0">&quot;&quot;&quot;</span></p>
<p><span class="font0">for event in pygame.event.get():</span></p>
<p><span class="font0">if event.type == pygame.QUIT:</span></p>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p>
<p><span class="font0">elif event.type == pygame.MOUSEBUTTONDOWN:</span></p>
<p><span class="font0">mouse_x, mouse_y = pygame.mouse.get_pos()</span></p>
<p><span class="font3">❶ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">check_play_button(ai_settings, screen, stats, sb, play_button,</span></p>
<p><span class="font0">ship, aliens, bullets, mouse_x, mouse_y)</span></p>
<p><span class="font2">check_events()</span><span class="font6">的定义需要包含形参</span><span class="font2">sb</span><span class="font6">，这样调用</span><span class="font2">check_play_button()</span><span class="font6">时，才能将</span><span class="font2">sb</span><span class="font6">作为实 参传递给它(见</span><span class="font4">❶</span><span class="font6">)。</span></p>
<p><span class="font6">最后，更新</span><span class="font7">alien_invasion.py</span><span class="font6">中调用</span><span class="font2">check_events()</span><span class="font6">的代码，也向它传递</span><span class="font2">sb</span><span class="font6">：</span></p>
<h6><a name="bookmark2"></a><span class="font1"><a name="bookmark3"></a>alien_invasion.py</span></h6>
<p><span class="font0"># </span><span class="font5">开始游戏主循环</span></p>
<p><span class="font0">while True:</span></p>
<p><span class="font0">gf.check_events(ai_settings, screen, stats, sb, play_button, ship, aliens, bullets)</span></p>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p>
<p><span class="font6">现在你可以知道升到多少级了，如图</span><span class="font7">14-5</span><span class="font6">所示。</span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>