<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:6pt Arial, sans-serif; }
 .font1 { font:8pt Arial, sans-serif; }
 .font2 { font:10pt Arial, sans-serif; }
 .font3 { font:12pt Arial, sans-serif; }
 .font4 { font:10pt Segoe UI, sans-serif; }
 .font5 { font:7pt SimHei, sans-serif; }
 .font6 { font:8pt SimHei, sans-serif; }
 .font7 { font:10pt SimHei, sans-serif; }
 .font8 { font:12pt SimHei, sans-serif; }
 .font9 { font:10pt SimSun, serif; }
 .font10 { font:9pt Times New Roman, serif; }
 .font11 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font11">386 </span><span class="font9">第</span><span class="font11">19</span><span class="font9">章 用户账户</span></p>
<p><span class="font9">这个链接放在了既有主题列表的后面。图</span><span class="font11">19-1</span><span class="font9">显示了生成的表单。请使用这个表单来添加几 个新主题。</span></p><img src="PythonPa Chong Kai Fa  Cong Ru - Eric Matthes - 0403_files/PythonPa20Chong20Kai20Fa2020Cong20Ru20-20Eric20Matthes20-200403-1.jpg" alt="" style="width:317pt;height:194pt;">
<p><span class="font6">图</span><span class="font10">19-1 </span><span class="font6">用于添加新主题的页面</span></p>
<ul style="list-style:none;"><li><a name="caption1"></a>
<h5><a name="bookmark0"></a><span class="font3"><a name="bookmark1"></a>19.1.2 </span><span class="font8">添加新条目</span></h5></li></ul>
<p><span class="font9">现在用户可以添加新主题了，但他们还想添加新条目。我们将再次定义</span><span class="font11">URL</span><span class="font9">,编写视图函数 和模板，并链接到添加新条目的网页。但在此之前，我们需要在</span><span class="font11">forms.py</span><span class="font9">中再添加一个类。</span></p>
<ul style="list-style:none;"><li>
<p><span class="font2">1.</span><span class="font7"> 用于添加新条目的表单</span></p></li></ul>
<p><span class="font9">我们需要创建一个与模型</span><span class="font4">Entry</span><span class="font9">相关联的表单，但这个表单的定制程度比</span><span class="font4">TopicForm</span><span class="font9">要高些：</span></p>
<p><span class="font2">forms.py</span></p>
<p><span class="font1">from django import forms</span></p>
<p><span class="font1">from .models import Topic, Entry</span></p>
<p><span class="font1">class TopicForm(forms.ModelForm):</span></p>
<ul style="list-style:none;"><li>
<p><span class="font1">--</span><span class="font1" style="font-style:italic;">snip</span><span class="font1">-</span></p></li></ul>
<p><span class="font1">class EntryForm(forms.ModelForm):</span></p>
<p><span class="font1">class Meta:</span></p>
<p><span class="font1">model = Entry fields = ['text'] </span><span class="font0">❶</span><span class="font5"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font1">labels = {'text': ''}</span></p>
<p><span class="font0">❷</span><span class="font5"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font1">widgets = {'text': forms.Textarea(attrs={'cols': 80})}</span></p>
<p><span class="font9">我们首先修改了 </span><span class="font4">import</span><span class="font9">语句，使其除导入</span><span class="font4">Topic</span><span class="font9">外，还导入</span><span class="font1">£</span><span class="font7">门口丫</span><span class="font9">。新类</span><span class="font4">EntryForm</span><span class="font9">继承了</span></p>
</body>
</html>