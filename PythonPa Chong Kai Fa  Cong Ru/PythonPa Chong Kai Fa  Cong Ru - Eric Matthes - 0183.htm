<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:12pt Arial, sans-serif; }
 .font2 { font:10pt Segoe UI, sans-serif; }
 .font3 { font:7pt SimHei, sans-serif; }
 .font4 { font:10pt SimHei, sans-serif; }
 .font5 { font:12pt SimHei, sans-serif; }
 .font6 { font:10pt SimSun, serif; }
 .font7 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font7">166</span></p>
<p><span class="font6">第</span><span class="font7">10</span><span class="font6">章 文件和异常</span></p>
<p><span class="font0">2643383279</span></p>
<p><span class="font6">为何会出现这些空白行呢？因为在这个文件中，每行的末尾都有一个看不见的换行符，而 </span><span class="font2">print</span><span class="font6">语句也会加上一个换行符，因此每行末尾都有两个换行符：一个来自文件，另一个来自</span><span class="font2">print </span><span class="font6">语句。要消除这些多余的空白行，可在</span><span class="font2">print</span><span class="font6">语句中使用</span><span class="font2">rstrip()</span><span class="font6">：</span></p>
<p><span class="font0">filename = 'pi_digits.txt'</span></p>
<p><span class="font0">with open(filename) as file_object:</span></p>
<p><span class="font0">for line in file_object:</span></p>
<p><span class="font0">print(line.rstrip())</span></p>
<p><span class="font6">现在，输出又与文件内容完全相同了：</span></p>
<p><span class="font0">3.1415926535</span></p>
<p><span class="font0">8979323846</span></p>
<p><span class="font0">2643383279</span></p>
<ul style="list-style:none;"><li>
<p><span class="font1">10.1.4</span><span class="font5"> 创建一个包含文件各行内容的列表</span></p></li></ul>
<p><span class="font6">使用关键字</span><span class="font2">with</span><span class="font6">时，</span><span class="font2">open()</span><span class="font6">返回的文件对象只在</span><span class="font2">with</span><span class="font6">代码块内可用。如果要在</span><span class="font2">with</span><span class="font6">代码块外 访问文件的内容，可在</span><span class="font2">with</span><span class="font6">代码块内将文件的各行存储在一个列表中，并在</span><span class="font2">with</span><span class="font6">代码块外使用该 列表：你可以立即处理文件的各个部分，也可推迟到程序后面再处理。</span></p>
<p><span class="font6">下面的示例在</span><span class="font2">with</span><span class="font6">代码块中将文件</span><span class="font7">pi_digits.txt</span><span class="font6">的各行存储在一个列表中，再在</span><span class="font2">with</span><span class="font6">代码块外 打印它们：</span></p>
<p><span class="font0">filename = 'pi_digits.txt'</span></p>
<p><span class="font0">with open(filename) as file_object:</span></p>
<p><span class="font3">❶ </span><span class="font0">lines = file_object.readlines()</span></p>
<p><span class="font3">❷ </span><span class="font0">for line in lines:</span></p>
<p><span class="font0">print(line.rstrip())</span></p>
<p><span class="font6">。处的方法</span><span class="font2">readlines()</span><span class="font6">从文件中读取每一行，并将其存储在一个列表中；接下来，该列表被 存储到变量</span><span class="font2">lines</span><span class="font6">中；在</span><span class="font2">with</span><span class="font6">代码块外，我们依然可以使用这个变量。在</span><span class="font4">❷</span><span class="font6">处，我们使用一个简单 的</span><span class="font2">for</span><span class="font6">循环来打印</span><span class="font2">lines</span><span class="font6">中的各行。由于列表</span><span class="font2">lines</span><span class="font6">的每个元素都对应于文件中的一行，因此输出 与文件内容完全一致。</span></p>
<ul style="list-style:none;"><li><a name="caption1"></a>
<h5><a name="bookmark0"></a><span class="font1"><a name="bookmark1"></a>10.1.5</span><span class="font5"> 使用文件的内容</span></h5></li></ul>
<p><span class="font6">将文件读取到内存中后，就可以以任何方式使用这些数据了。下面以简单的方式使用圆周率 的值。首先，我们将创建一个字符串，它包含文件中存储的所有数字，且没有任何空格：</span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>