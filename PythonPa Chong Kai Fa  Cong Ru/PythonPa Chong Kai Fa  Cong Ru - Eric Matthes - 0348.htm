<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:12pt Arial, sans-serif; }
 .font3 { font:7pt SimHei, sans-serif; }
 .font4 { font:8pt SimHei, sans-serif; }
 .font5 { font:12pt SimHei, sans-serif; }
 .font6 { font:8pt SimSun, serif; }
 .font7 { font:10pt SimSun, serif; }
 .font8 { font:9pt Times New Roman, serif; }
 .font9 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font9">16.2 </span><span class="font7">制作世界人口地图：</span><span class="font9">JSON</span><span class="font7">格式</span></p>
<p><span class="font9">331</span></p>
<div><img src="PythonPa Chong Kai Fa  Cong Ru - Eric Matthes - 0348_files/PythonPa20Chong20Kai20Fa2020Cong20Ru20-20Eric20Matthes20-200348-1.jpg" alt="" style="width:356pt;height:14pt;">
</div><br clear="all">
<div><img src="PythonPa Chong Kai Fa  Cong Ru - Eric Matthes - 0348_files/PythonPa20Chong20Kai20Fa2020Cong20Ru20-20Eric20Matthes20-200348-2.jpg" alt="" style="width:354pt;height:218pt;">
<p><span class="font4">图</span><span class="font8">16-8 </span><span class="font4">北美国家的人口数量</span></p>
</div><br clear="all">
<p><span class="font7">这幅地图具有交互性：如果你将鼠标指向某个国家，将看到其人口数量。下面在这个地图中 添加更多的数据。</span></p>
<p><span class="font2">16.2.7 </span><span class="font5">绘制完整的世界人口地图</span></p>
<p><span class="font7">要呈现其他国家的人口数量，需要将前面处理的数据转换为</span><span class="font9">Pygal</span><span class="font7">要求的字典格式：键为两 个字母的国别码，值为人口数量。为此，在</span><span class="font9">world_population.py</span><span class="font7">中添加如下代码：</span></p><a name="caption1"></a>
<h6><a name="bookmark0"></a><span class="font1"><a name="bookmark1"></a>world_population.py</span></h6>
<p><span class="font0">import json</span></p>
<p><span class="font0">import pygal</span></p>
<div>
<p><span class="font2" style="font-weight:bold;">16</span></p>
</div><br clear="all">
<p><span class="font0">from country_codes import get_country_code</span></p>
<p><span class="font0"># </span><span class="font6">将数据加载到列表中</span></p>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p>
<p><span class="font0"># </span><span class="font6">创建一个包含人口数量的字典</span></p>
<p><span class="font3">❶ </span><span class="font0">cc_populations = {}</span></p>
<p><span class="font0">for pop_dict in pop_data:</span></p>
<p><span class="font0">if pop_dict['Year'] == '2010':</span></p>
<p><span class="font0">country = pop_dict['Country Name']</span></p>
<p><span class="font0">population = int(float(pop_dict['Value'])) </span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>