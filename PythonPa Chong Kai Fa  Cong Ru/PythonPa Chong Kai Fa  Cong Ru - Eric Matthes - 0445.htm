<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:6pt Arial, sans-serif; }
 .font1 { font:8pt Arial, sans-serif; }
 .font2 { font:10pt Arial, sans-serif; }
 .font3 { font:12pt Arial, sans-serif; }
 .font4 { font:10pt Segoe UI, sans-serif; }
 .font5 { font:7pt SimHei, sans-serif; }
 .font6 { font:10pt SimHei, sans-serif; }
 .font7 { font:12pt SimHei, sans-serif; }
 .font8 { font:10pt SimSun, serif; }
 .font9 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font9">428</span></p>
<p><span class="font8">第</span><span class="font9">20</span><span class="font8">章 设置应用程序的样式并对其进行部署</span></p>
<p><span class="font8">要对</span><span class="font9">Heroku</span><span class="font8">项目执行</span><span class="font9">Django</span><span class="font8">和</span><span class="font9">Python</span><span class="font8">命令，可使用命令</span><span class="font4">heroku run</span><span class="font8">。下面演示了如何对</span><span class="font9">Heroku</span><span class="font8">部 署执行命令</span><span class="font4">migrate</span><span class="font8">：</span></p>
<p><span class="font0">❶</span><span class="font5"> </span><span class="font1">(ll_env)learning_log$ </span><span class="font1" style="font-weight:bold;">heroku run python manage.py migrate</span></p>
<p><span class="font0">❷</span><span class="font5"> </span><span class="font1">Running 'python manage.py migrate' on afternoon-meadow-2775…up, run.2435</span></p>
<ul style="list-style:none;"><li>
<p><span class="font1">--</span><span class="font1" style="font-style:italic;">snip</span><span class="font1">--</span></p></li></ul>
<p><span class="font0">❸</span><span class="font5"> </span><span class="font1">Running migrations:</span></p>
<ul style="list-style:none;"><li>
<p><span class="font1">--</span><span class="font1" style="font-style:italic;">snip</span><span class="font1">-</span></p></li></ul>
<p><span class="font1">Applying learning_logs.0001_initial... OK</span></p>
<p><span class="font1">Applying learning_logs.0002_entry... OK</span></p>
<p><span class="font1">Applying learning_logs.0003_topic_user... OK</span></p>
<p><span class="font1">Applying sessions.0001_initial... OK</span></p>
<p><span class="font1">(ll_env)learning_log$</span></p>
<p><span class="font8">我们首先执行了命令</span><span class="font4">heroku run python manage.py migrate </span><span class="font8">(见</span><span class="font6">❶</span><span class="font8">)；</span><span class="font9">Heroku</span><span class="font8">随后创建一个终 端会话来执行命令</span><span class="font4">migrate </span><span class="font8">(见</span><span class="font6">❷</span><span class="font8">)。在</span><span class="font6">❸</span><span class="font8">处，</span><span class="font9">Django</span><span class="font8">应用默认迁移以及我们在开发“学习笔记” 期间生成的迁移。</span></p>
<p><span class="font8">现在如果你访问这个部署的应用程序，将能够像在本地系统上一样使用它。然而，你看不到 你在本地部署中输入的任何数据，因为它们没有复制到在线服务器。一种通常的做法是不将本地 数据复制到在线部署中，因为本地数据通常是测试数据。</span></p>
<p><span class="font8">你可以分享“学习笔记”的</span><span class="font9">Heroku URL</span><span class="font8">，让任何人都可以使用它。在下一节，我们将再完 成几个任务，以结束部署过程并让你能够继续开发“学习笔记”。</span></p>
<ul style="list-style:none;"><li><a name="caption1"></a>
<h5><a name="bookmark0"></a><span class="font3"><a name="bookmark1"></a>20.2.14</span><span class="font7"> 改进 </span><span class="font3">Heroku </span><span class="font7">部署</span></h5></li></ul>
<p><span class="font8">在本节中，我们将通过创建超级用户来改进部署，就像在本地一样。我们还将让这个项目更 安全：将</span><span class="font4">DEBUG</span><span class="font8">设置为</span><span class="font4">False</span><span class="font8">，让用户在错误消息中看不到额外的信息，以防他们使用这些信息来 攻击服务器。</span></p>
<ul style="list-style:none;"><li>
<p><span class="font2">1 .</span><span class="font6">在</span><span class="font2">Heroku</span><span class="font6">上创建超级用户</span></p></li></ul>
<p><span class="font8">我们知道可使用命令</span><span class="font4">heroku run</span><span class="font8">来执行一次性命令,但也可这样执行命令:在连接到了 </span><span class="font9">Heroku </span><span class="font8">服务器的情况下，使用命令</span><span class="font4">heroku run bash</span><span class="font8">来打开</span><span class="font9">Bash</span><span class="font8">终端会话。</span><span class="font9">Bash</span><span class="font8">是众多</span><span class="font9">Linux</span><span class="font8">终端运行的 语言。我们将使用</span><span class="font9">Bash</span><span class="font8">终端会话来创建超级用户，以便能够访问在线应用程序的管理网站：</span></p>
<p><span class="font1">(ll_env)learning_log$ </span><span class="font1" style="font-weight:bold;">heroku run bash</span></p>
<p><span class="font1">Running 'bash' on afternoon-meadow-2775... up, run.6244</span></p>
<p><span class="font0">❶</span><span class="font5"> </span><span class="font1">~ $ </span><span class="font1" style="font-weight:bold;">ls</span></p>
<p><span class="font1">learning_log learning_logs manage.py Procfile requirements.txt runtime.txt users staticfiles</span></p>
<p><span class="font0">❷</span><span class="font5"> </span><span class="font1">~ $ </span><span class="font1" style="font-weight:bold;">python manage.py createsuperuser</span></p>
<p><span class="font1">Username (leave blank to use 'u41907'): </span><span class="font1" style="font-weight:bold;">ll_admin</span></p>
<p><span class="font1">Email address:</span></p>
<p><span class="font1">Password:</span></p>
<p><span class="font1">Password (again):</span></p>
<p><span class="font1">Superuser created successfully. </span><span class="font0">❸</span><span class="font5"> </span><span class="font1">~ $ </span><span class="font1" style="font-weight:bold;">exit</span></p>
<div>
</div><br clear="all">
</body>
</html>