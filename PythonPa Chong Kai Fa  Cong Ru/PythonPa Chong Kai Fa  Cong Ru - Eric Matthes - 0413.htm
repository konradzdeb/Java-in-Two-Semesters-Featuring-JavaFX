<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:12pt Arial, sans-serif; }
 .font3 { font:10pt Segoe UI, sans-serif; }
 .font4 { font:8pt SimHei, sans-serif; }
 .font5 { font:10pt SimHei, sans-serif; }
 .font6 { font:12pt SimHei, sans-serif; }
 .font7 { font:8pt SimSun, serif; }
 .font8 { font:10pt SimSun, serif; }
 .font9 { font:9pt Times New Roman, serif; }
 .font10 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font10">396</span></p>
<p><span class="font8">第</span><span class="font10">19</span><span class="font8">章 用户账户</span></p><img src="PythonPa Chong Kai Fa  Cong Ru - Eric Matthes - 0413_files/PythonPa20Chong20Kai20Fa2020Cong20Ru20-20Eric20Matthes20-200413-1.jpg" alt="" style="width:308pt;height:156pt;">
<p><span class="font4">图</span><span class="font9">19-4 </span><span class="font4">登录页面</span></p>
<ul style="list-style:none;"><li><a name="caption1"></a>
<h5><a name="bookmark0"></a><span class="font2"><a name="bookmark1"></a>19.2.3 </span><span class="font6">注销</span></h5></li></ul>
<p><span class="font8">现在需要提供一个让用户注销的途径。我们不创建用于注销的页面，而让用户只需单击一个 链接就能注销并返回到主页。为此，我们将为注销链接定义一个</span><span class="font10">URL</span><span class="font8">模式，编写一个视图函数， 并在</span><span class="font10">base.html</span><span class="font8">中添加一个注销链接。</span></p>
<ul style="list-style:none;"><li>
<p><span class="font1">1. 1</span><span class="font5">注销</span><span class="font1">URL</span></p></li></ul>
<p><span class="font8">下面的代码为注销定义了</span><span class="font10">URL</span><span class="font8">模式，该模式与</span><span class="font10">URL</span><span class="font8">卜</span><span class="font10">1^://10©@1</span><span class="font8">尿</span><span class="font10">$</span><span class="font8">七</span><span class="font10">8000</span><span class="font8">用</span><span class="font10">$©1$/1080</span><span class="font8">出</span><span class="font10">/</span><span class="font8">匹配。修 改后的</span><span class="font10">users/urls.py</span><span class="font8">如下：</span></p>
<p><span class="font1">urls.py</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li></ul>
<p><span class="font0">urlpatterns = [</span></p>
<p><span class="font0"># </span><span class="font7">登录页面</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li>
<li>
<p><span class="font0"># </span><span class="font7">注销</span></p></li></ul>
<p><span class="font0">url(r'<sup>A</sup>logout/$', views.logout_view, name='logout'), ]</span></p>
<p><span class="font8">这个</span><span class="font10">URL</span><span class="font8">模式将请求发送给函数</span><span class="font3">logout_view()</span><span class="font8">。这样给这个函数命名，旨在将其与我们将在 其中调用的函数</span><span class="font3">logout</span><span class="font8">。区分开来(请确保你修改的是</span><span class="font10">users/urls.py</span><span class="font8">，而不是</span><span class="font10">1earning_1og/ urls.py</span><span class="font8">)。</span></p>
<ul style="list-style:none;"><li>
<p><span class="font1">2 .</span><span class="font5">视图函数 </span><span class="font3">logout_view()</span></p></li></ul>
<p><span class="font8">函数</span><span class="font3">logout_view(&quot;</span><span class="font8">艮简单：只是导入口上加</span><span class="font10">8</span><span class="font8">。函数</span><span class="font3">logout</span><span class="font8">。，并调用它，再重定向到主页。请 打开</span><span class="font10">users/views.py</span><span class="font8">，并输入下面的代码：</span></p>
<p><span class="font1">views.py</span></p>
<p><span class="font0">from django.http import HttpResponseRedirect</span></p>
<p><span class="font0">from django.core.urlresolvers import reverse</span></p>
</body>
</html>