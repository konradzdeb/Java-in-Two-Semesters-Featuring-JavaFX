<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:12pt Arial, sans-serif; }
 .font3 { font:10pt Calibri, sans-serif; }
 .font4 { font:10pt Segoe UI, sans-serif; }
 .font5 { font:7pt SimHei, sans-serif; }
 .font6 { font:12pt SimHei, sans-serif; }
 .font7 { font:8pt SimSun, serif; }
 .font8 { font:10pt SimSun, serif; }
 .font9 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font9">16.1 CSV</span><span class="font8">文件格式</span></p>
<p><span class="font9">315</span></p>
<p><span class="font8">我们创建了一个名为</span><span class="font4">highs</span><span class="font8">的空列表(见</span><span class="font3">O </span><span class="font8">),再遍历文件中余下的各行(见</span><span class="font3">❷</span><span class="font8">)。阅读器对象 从其停留的地方继续往下读取</span><span class="font9">CSV</span><span class="font8">文件，每次都自动返回当前所处位置的下一行。由于我们已经 读取了文件头行，这个循环将从第二行开始</span><span class="font9">——</span><span class="font8">从这行开始包含的是实际数据。每次执行该循环 时，我们都将索弓</span><span class="font9">11</span><span class="font8">处(第</span><span class="font9">2</span><span class="font8">列)的数据附加到</span><span class="font4">highs</span><span class="font8">末尾(见</span><span class="font3">❸</span><span class="font8">)。</span></p>
<p><span class="font8">下面显示了 </span><span class="font4">highs</span><span class="font8">现在存储的数据：</span></p>
<p><span class="font0">['64', '71', '64', '59', '69', '62', '61', '55', '57', '61', '57', '59', '57',</span></p>
<p><span class="font0">'61', '64', '61', '59', '63', '60', '57', '69', '63', '62', '59', '57', '57', '61', '59', '61', '61', '66']</span></p>
<p><span class="font8">我们提取了每天的最高气温，并将它们作为字符串整洁地存储在一个列表中。</span></p>
<p><span class="font8">下面使用</span><span class="font4">int()</span><span class="font8">将这些字符串转换为数字，让</span><span class="font9">matplotlib</span><span class="font8">能够读取它们：</span></p>
<p><span class="font1">highs_lows.py</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">--</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">-</span></p></li></ul>
<p><span class="font0">highs = []</span></p>
<p><span class="font0">for row in reader:</span></p>
<p><span class="font5">❶ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">high = int(row[l])</span></p>
<p><span class="font0">highs.append(high)</span></p>
<p><span class="font0">print(highs)</span></p><a name="caption1"></a>
<h6><a name="bookmark0"></a><span class="font8"><a name="bookmark1"></a>在</span><span class="font3">❶</span><span class="font8">处，我们将表示气温的字符串转换成了数字，再将其附加到列表末尾。这样，最终的列 表将包含以数字表示的每日最高气温：</span></h6>
<p><span class="font0">[64, 71, 64, 59, 69, 62, 61, 55, 57, 61, 57, 59, 57, 61, 64, 61, 59, 63, 60, 57,</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">69, 63, 62, 59, 57, 57, 61, 59, 61, 61, 66]</span></p></li></ul>
<p><span class="font8">下面来对这些数据进行可视化。</span></p>
<ul style="list-style:none;"><li><a name="caption2"></a>
<h5><a name="bookmark2"></a><span class="font2"><a name="bookmark3"></a>16.1.4</span><span class="font6"> 绘制气温图表</span></h5></li></ul>
<p><span class="font8">为可视化这些气温数据，我们首先使用</span><span class="font9">matplotlib</span><span class="font8">创建一个显示每日最高气温的简单图形，如 下所示：</span></p>
<h6><a name="bookmark4"></a><span class="font1"><a name="bookmark5"></a>highs_lows.py</span></h6>
<div>
<p><span class="font2" style="font-weight:bold;">16</span></p>
</div><br clear="all">
<p><span class="font0">import csv</span></p>
<p><span class="font0">from matplotlib import pyplot as plt</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0">#</span><span class="font7"> 从文件中获取最高气温</span></p></li>
<li>
<p><span class="font0">- -</span><span class="font0" style="font-style:italic;">snip</span><span class="font0">--</span></p></li>
<li>
<p><span class="font0">#</span><span class="font7"> 根据数据绘制图形</span></p></li></ul>
<p><span class="font0">fig = plt.figure(dpi=128, figsize=(10, 6))</span></p>
<p><span class="font5">❶ </span><span class="font0">plt.plot(highs, c='red')</span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>