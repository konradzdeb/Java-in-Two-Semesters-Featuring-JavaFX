<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:12pt Arial, sans-serif; }
 .font3 { font:10pt Segoe UI, sans-serif; }
 .font4 { font:7pt SimHei, sans-serif; }
 .font5 { font:10pt SimHei, sans-serif; }
 .font6 { font:12pt SimHei, sans-serif; }
 .font7 { font:9pt SimSun, serif; }
 .font8 { font:10pt SimSun, serif; }
 .font9 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font9">10.1 </span><span class="font8">从文件中读取数据</span></p>
<p><span class="font9">165</span></p>
<p><span class="font0">file_path = '/home/ehmatthes/other_files/text_files/</span><span class="font0" style="font-style:italic;">filename</span><span class="font0">.txt'</span></p>
<p><span class="font0">with open(file_path) as file_object:</span></p>
<p><span class="font8">而在</span><span class="font9">Windows</span><span class="font8">系统中，它们类似于下面这样：</span></p>
<p><span class="font0">file_path = 'C:\Users\ehmatthes\other_files\text_files\</span><span class="font0" style="font-style:italic;">filename</span><span class="font0">.txt'</span></p>
<p><span class="font0">with open(file_path) as file_object:</span></p>
<p><span class="font8">通过使用绝对路径，可读取系统任何地方的文件。就目前而言，最简单的做法是，要么将数 据文件存储在程序文件所在的目录，要么将其存储在程序文件所在目录下的一个文件夹(如 </span><span class="font9">text_files</span><span class="font8">)中。</span></p>
<p><span class="font8">注意 </span><span class="font9">Windows</span><span class="font7">系统有时能够正确地解读文件路径中的斜杠。如果你使用的是</span><span class="font9">Windows</span><span class="font7">系统，且 结果不符合预期，请确保在文件路径中使用的是反斜杠。</span></p>
<ul style="list-style:none;"><li><a name="caption1"></a>
<h5><a name="bookmark0"></a><span class="font2"><a name="bookmark1"></a>10.1.3</span><span class="font6"> 逐行读取</span></h5></li></ul>
<p><span class="font8">读取文件时，常常需要检查其中的每一行：你可能要在文件中查找特定的信息，或者要以 某种方式修改文件中的文本。例如，你可能要遍历一个包含天气数据的文件，并使用天气描述 中包含字样</span><span class="font9">sunny</span><span class="font8">的行。在新闻报道中，你可能会查找包含标签</span><span class="font3">(headline</span><span class="font5">〉</span><span class="font8">的行，并按特定的格 式设置它。</span></p>
<div>
<p><span class="font2" style="font-weight:bold;">10</span></p>
</div><br clear="all">
<p><span class="font8">要以每次一行的方式检查文件，可对文件对象使用</span><span class="font3">for</span><span class="font8">循环：</span></p>
<p><span class="font1">file_reader.py</span></p>
<p><span class="font4">❶ </span><span class="font0">filename = 'pi_digits.txt'</span></p>
<p><span class="font4">❷ </span><span class="font0">with open(filename) as file_object:</span></p>
<p><span class="font4">❸ </span><span class="font0">for line in file_object: print(line)</span></p>
<p><span class="font8">在。处，我们将要读取的文件的名称存储在变量</span><span class="font3">filename</span><span class="font8">中，这是使用文件时一种常见的做 法。由于变量</span><span class="font3">filename</span><span class="font8">表示的并非实际文件一它只是一个让</span><span class="font9">Python</span><span class="font8">知道到哪里去查找文件的字 符串，因此可轻松地将</span><span class="font3">'pi_digits.txt'</span><span class="font8">替换为你要使用的另一个文件的名称。调用</span><span class="font5">。</span><span class="font3">pen()</span><span class="font8">后，将 一个表示文件及其内容的对象存储到了变量</span><span class="font3">file_object</span><span class="font8">中(见</span><span class="font5">❷</span><span class="font8">)。这里也使用了关键字</span><span class="font3">with</span><span class="font8">， 让</span><span class="font9">Python</span><span class="font8">负责妥善地打开和关闭文件。为查看文件的内容，我们通过对文件对象执行循环来遍历 文件中的每一行(见</span><span class="font5">❹</span><span class="font8">)。</span></p>
<p><span class="font8">我们打印每一行时，发现空白行更多了：</span></p>
<p><span class="font0">3.1415926535</span></p>
<p><span class="font0">8979323846</span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>