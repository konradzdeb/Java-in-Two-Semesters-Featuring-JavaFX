<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:12pt Arial, sans-serif; }
 .font3 { font:10pt Segoe UI, sans-serif; }
 .font4 { font:7pt SimHei, sans-serif; }
 .font5 { font:10pt SimHei, sans-serif; }
 .font6 { font:12pt SimHei, sans-serif; }
 .font7 { font:8pt SimSun, serif; }
 .font8 { font:10pt SimSun, serif; }
 .font9 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font9">10.3 </span><span class="font8">异常</span></p>
<p><span class="font9">177</span></p>
<p><span class="font0">msg = &quot;Sorry, the file &quot;&nbsp;+ filename + &quot;&nbsp;does not exist.&quot; print(msg)</span></p>
<p><span class="font0">else:</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0"># </span><span class="font7">计算文件大致包含多少个单词</span></p></li></ul>
<p><span class="font4">❶ &nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">words = contents.split()</span></p>
<p><span class="font4">❷ &nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">num_words = len(words)</span></p>
<p><span class="font4">❸ </span><span class="font0">print(&quot;The file &quot;&nbsp;+ filename + &quot;&nbsp;has about &quot;&nbsp;+ str(num_words) + &quot;&nbsp;words.&quot;)</span></p>
<p><span class="font8">我们把文件</span><span class="font9">alice.txt</span><span class="font8">移到了正确的目录中，让</span><span class="font3">try</span><span class="font8">代码块能够成功地执行。在。处，我们对变 量</span><span class="font3">contents </span><span class="font8">(它现在是一个长长的字符串，包含童话</span><span class="font9" style="font-style:italic;">Alice in Wonderland</span><span class="font8">的全部文本)调用方法 </span><span class="font3">split()</span><span class="font8">，以生成一个列表，其中包含这部童话中的所有单词。当我们使用</span><span class="font3">len()</span><span class="font8">来确定这个列表 的长度时，就知道了原始字符串大致包含多少个单词(见</span><span class="font5">❷</span><span class="font8">)。在</span><span class="font5">❸</span><span class="font8">处，我们打印一条消息，指 出文件包含多少个单词。这些代码都放在</span><span class="font3">else</span><span class="font8">代码块中，因为仅当</span><span class="font3">try</span><span class="font8">代码块成功执行时才执行 它们。输出指出了文件</span><span class="font9">alice.txt</span><span class="font8">包含多少个单词：</span></p>
<p><span class="font0">The file alice.txt has about 29461 words.</span></p>
<p><span class="font8">这个数字有点大，因为这里使用的文本文件包含出版商提供的额外信息，但与童话</span><span class="font9" style="font-style:italic;">Alice in Wonderland</span><span class="font8">的长度相当一致。</span></p>
<ul style="list-style:none;"><li><a name="caption1"></a>
<h5><a name="bookmark0"></a><span class="font2"><a name="bookmark1"></a>10.3.7 </span><span class="font6">使用多个文件</span></h5>
<div>
<p><span class="font2" style="font-weight:bold;">10</span></p>
</div><br clear="all"></li></ul>
<p><span class="font8">下面多分析几本书。这样做之前，我们先将这个程序的大部分代码移到一个名为 </span><span class="font3">count_words()</span><span class="font8">的函数中，这样对多本书进行分析时将更容易：</span></p>
<h6><a name="bookmark2"></a><span class="font1"><a name="bookmark3"></a>word_count.py</span></h6>
<p><span class="font0">def count_words(filename):</span></p>
<p><span class="font4">❶ &nbsp;&nbsp;</span><span class="font0">&quot;&quot;&quot;</span><span class="font7">计算一个文件大致包含多少个单词</span><span class="font0">&quot;&quot;&quot;</span></p>
<p><span class="font0">try:</span></p>
<p><span class="font0">with open(filename) as f_obj: contents = f_obj.read() except FileNotFoundError:</span></p>
<p><span class="font0">msg = &quot;Sorry, the file &quot;&nbsp;+ filename + &quot;&nbsp;does not exist.&quot; print(msg) else:</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0"># </span><span class="font7">计算文件大致包含多少个单词</span></p></li></ul>
<p><span class="font0">words = contents.split() num_words = len(words) print(&quot;The file &quot;&nbsp;+ filename + &quot;&nbsp;has about &quot;&nbsp;+ str(num_words) + &quot;&nbsp;words.&quot;)</span></p>
<p><span class="font0">filename = 'alice.txt' count_words(filename)</span></p>
<p><span class="font8">这些代码大都与原来一样，我们只是将它们移到了函数</span><span class="font3">count_words()</span><span class="font8">中，并增加了缩进量。 修改程序的同时更新注释是个不错的习惯，因此我们将注释改成了文档字符串，并稍微调整了一 </span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>