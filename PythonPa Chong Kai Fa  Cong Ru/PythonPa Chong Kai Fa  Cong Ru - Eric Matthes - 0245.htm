<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="generator" content="ABBYY FineReader PDF 15">
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:8pt Arial, sans-serif; }
 .font1 { font:10pt Arial, sans-serif; }
 .font2 { font:12pt Arial, sans-serif; }
 .font3 { font:10pt Segoe UI, sans-serif; }
 .font4 { font:7pt SimHei, sans-serif; }
 .font5 { font:8pt SimHei, sans-serif; }
 .font6 { font:12pt SimHei, sans-serif; }
 .font7 { font:8pt SimSun, serif; }
 .font8 { font:10pt SimSun, serif; }
 .font9 { font:9pt Times New Roman, serif; }
 .font10 { font:10pt Times New Roman, serif; }

</style>
</head>
<body>
<p><span class="font10">228</span></p>
<p><span class="font8">第</span><span class="font10">12</span><span class="font8">章 武装飞船</span></p><img src="PythonPa Chong Kai Fa  Cong Ru - Eric Matthes - 0245_files/PythonPa20Chong20Kai20Fa2020Cong20Ru20-20Eric20Matthes20-200245-1.jpg" alt="" style="width:321pt;height:221pt;">
<p><span class="font5">图</span><span class="font9">12-3 </span><span class="font5">飞船发射一系列子弹后的《外星人入侵》游戏</span></p>
<ul style="list-style:none;"><li>
<p><span class="font2">12.8.5 </span><span class="font6">删除已消失的子弹</span></p></li></ul>
<p><span class="font8">当前，子弹抵达屏幕顶端后消失，这仅仅是因为</span><span class="font10">Pygame</span><span class="font8">无法在屏幕外面绘制它们。这些子 弹实际上依然存在，它们的</span><span class="font10" style="font-style:italic;">^</span><span class="font8">坐标为负数，且越来越小。这是个问题，因为它们将继续消耗内存 和处理能力。</span></p>
<p><span class="font8">我们需要将这些已消失的子弹删除，否则游戏所做的无谓工作将越来越多，进而变得越来越 慢。为此，我们需要检测这样的条件，即表示子弹的</span><span class="font3">rect</span><span class="font8">的</span><span class="font3">bottom</span><span class="font8">属性为零，它表明子弹已穿过 屏幕顶端：</span></p><a name="caption1"></a>
<h6><a name="bookmark0"></a><span class="font1"><a name="bookmark1"></a>alien_invasion.py</span></h6>
<ul style="list-style:none;"><li>
<p><span class="font0"># </span><span class="font7">开始游戏主循环</span></p></li></ul>
<p><span class="font0">while True:</span></p>
<p><span class="font0">gf.check_events(ai_settings, screen, ship, bullets)</span></p>
<p><span class="font0">ship.update()</span></p>
<p><span class="font0">bullets.update()</span></p>
<ul style="list-style:none;"><li>
<p><span class="font0"># </span><span class="font7">删除已消失的子弹</span></p></li></ul>
<p><span class="font4">❶ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">for bullet in bullets.copy():</span></p>
<p><span class="font4">❷ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">if bullet.rect.bottom &lt;= 0:</span></p>
<p><span class="font4">❸ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">bullets.remove(bullet)</span></p>
<p><span class="font4">❹ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="font0">print(len(bullets))</span></p>
<p><span class="font0">gf.update_screen(ai_settings, screen, ship, bullets)</span></p>
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
<div>
</div><br clear="all">
</body>
</html>